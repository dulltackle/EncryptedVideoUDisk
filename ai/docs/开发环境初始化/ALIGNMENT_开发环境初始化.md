# 开发环境初始化 - 需求理解确认文档

## 项目和任务特性规范

### 项目基本信息
- **项目名称**: 加密视频U盘（Encrypted Video U Disk）
- **项目类型**: 桌面应用程序（Electron + Vue 3 + TypeScript）
- **目标平台**: Windows 7/10/11
- **部署方式**: 绿色便携版，从U盘直接运行
- **用户群体**: 年龄较大的医生学员（适老化设计）

### 技术栈规范

#### 核心技术架构
- **桌面框架**: Electron 27.0.0
- **前端框架**: Vue.js 3 + TypeScript + Vite
- **UI组件库**: Element Plus + 自定义适老化组件
- **视频处理**: FFmpeg.js + Video.js
- **加密技术**: AES-256-GCM + RSA-2048
- **状态管理**: Pinia
- **构建工具**: Electron Builder + Vite

#### 开发工具要求
- **Node.js**: >= 18.0.0 (推荐 LTS 版本)
- **包管理器**: npm 或 yarn
- **代码编辑器**: VS Code (推荐)
- **版本控制**: Git
- **操作系统**: Windows 10/11 (主要开发环境)

### 项目结构规范
```
EncryptedVideoUDisk/
├── src/
│   ├── main/                 # Electron主进程
│   │   ├── index.ts         # 主进程入口
│   │   ├── security/        # 安全模块
│   │   ├── crypto/          # 加密解密模块
│   │   └── usb/             # U盘检测模块
│   ├── renderer/            # 渲染进程（前端）
│   │   ├── components/      # Vue组件
│   │   ├── views/           # 页面视图
│   │   ├── stores/          # Pinia状态管理
│   │   ├── utils/           # 工具函数
│   │   └── assets/          # 静态资源
│   └── shared/              # 共享代码
│       ├── types/           # TypeScript类型定义
│       └── constants/       # 常量定义
├── public/                  # 公共资源
├── dist/                    # 构建输出
├── scripts/                 # 构建脚本
└── docs/                    # 项目文档
```

## 原始需求分析

### 核心业务需求
1. **视频加密播放**: 医学技术培训视频的安全播放
2. **防复制保护**: 防止视频被复制、另存或传输
3. **适老化界面**: 针对年龄较大医生的易用性设计
4. **便携部署**: U盘即插即用，无需安装
5. **密码保护**: 播放器启动需要密码验证

### 技术需求
1. **跨Windows版本兼容**: 支持Win7/10/11
2. **高性能视频解码**: 确保播放流畅不卡顿
3. **多层安全防护**: 文件加密 + 内存保护 + 防调试
4. **绿色便携**: 所有依赖打包，无需系统安装

### 用户体验需求
1. **极简操作流程**: 插入U盘 → 启动播放器 → 输入密码 → 选择视频
2. **大字体大按钮**: 字体≥16px，按钮≥44px×44px
3. **医学专业风格**: 蓝色主题，专业配色
4. **清晰视觉层次**: 重要功能突出显示

## 边界确认（明确任务范围）

### 开发环境初始化包含的范围

#### ✅ 包含内容
1. **开发工具安装配置**
   - Node.js 环境安装
   - 包管理器配置
   - VS Code 及插件配置
   - Git 环境配置

2. **项目基础架构搭建**
   - 创建 Electron + Vue 3 项目骨架
   - 配置 TypeScript 开发环境
   - 集成 Element Plus UI 组件库
   - 配置 Vite 构建工具
   - 设置 ESLint + Prettier 代码规范

3. **开发环境配置**
   - 配置热重载开发服务器
   - 设置调试环境（主进程 + 渲染进程）
   - 配置构建脚本和打包流程
   - 设置环境变量管理

4. **基础项目结构**
   - 创建标准目录结构
   - 配置路径别名
   - 设置基础路由
   - 创建基础组件模板

5. **开发规范配置**
   - Git hooks 配置
   - 提交信息规范
   - 代码格式化规则
   - TypeScript 严格模式配置

#### ❌ 不包含内容
1. **具体业务功能实现**
   - 视频加密解密逻辑
   - 播放器核心功能
   - 安全防护机制
   - U盘检测功能

2. **UI界面开发**
   - 具体页面组件
   - 业务交互逻辑
   - 样式主题定制
   - 适老化界面实现

3. **第三方服务集成**
   - FFmpeg.js 集成
   - 加密库集成
   - 安全模块开发

4. **测试和部署**
   - 单元测试编写
   - 集成测试配置
   - 生产环境打包
   - U盘部署流程

### 交付物边界
- **最小可运行项目**: 能够启动的 Electron 应用
- **开发环境文档**: 环境搭建和配置说明
- **项目结构说明**: 目录结构和文件组织规范
- **开发规范文档**: 代码规范和提交规范

## 需求理解（对现有项目的理解）

### 项目架构理解

#### 技术选型合理性分析
1. **Electron 框架选择**
   - ✅ 优势: 跨平台兼容性好，丰富的系统API访问能力
   - ✅ 适合: 桌面应用开发，便于实现安全控制
   - ⚠️ 注意: 需要优化启动速度和内存占用

2. **Vue 3 + TypeScript 选择**
   - ✅ 优势: 轻量级，易学习，适合快速开发
   - ✅ 适合: 适老化界面开发，组件化设计
   - ✅ TypeScript: 提供类型安全，减少运行时错误

3. **Element Plus 选择**
   - ✅ 优势: 成熟的组件库，丰富的组件支持
   - ✅ 可定制: 支持主题定制，适配适老化需求
   - ⚠️ 注意: 需要大幅定制以满足适老化要求

#### 安全架构理解
1. **多层加密体系**
   - 文件级: AES-256-GCM 加密视频文件
   - 传输级: RSA-2048 密钥交换
   - 内存级: 防止内存dump，及时清理解密数据

2. **防护机制**
   - 进程保护: 防调试，反逆向工程
   - 界面保护: 禁用开发者工具，防截屏
   - 文件保护: 禁用复制，防止文件导出

#### 用户体验理解
1. **适老化设计要求**
   - 视觉: 大字体(≥16px)，大按钮(≥44px)，高对比度
   - 交互: 简化操作流程，减少认知负担
   - 反馈: 清晰的操作提示和错误信息

2. **医学专业风格**
   - 色彩: 医学蓝(#2E5BBA)主色调
   - 布局: 简洁专业，突出核心功能
   - 图标: 医学相关的专业图标

### 开发环境需求理解

#### 开发工具链需求
1. **Node.js 环境**
   - 版本要求: >= 18.0.0 (支持最新ES特性)
   - 包管理: npm 或 yarn (推荐 npm)
   - 全局工具: electron, @vue/cli

2. **开发编辑器**
   - 推荐: VS Code
   - 必需插件: Vue Language Features, TypeScript, ESLint, Prettier
   - 可选插件: GitLens, Auto Rename Tag, Bracket Pair Colorizer

3. **构建工具链**
   - 开发服务器: Vite (快速热重载)
   - 打包工具: Electron Builder
   - 代码检查: ESLint + Prettier
   - 类型检查: TypeScript Compiler

#### 项目配置需求
1. **TypeScript 配置**
   - 严格模式启用
   - 路径别名配置
   - 类型声明文件

2. **构建配置**
   - 开发环境热重载
   - 生产环境优化
   - 多进程调试配置

3. **代码规范配置**
   - ESLint 规则配置
   - Prettier 格式化规则
   - Git hooks 配置

## 疑问澄清（存在歧义的地方）

### 已通过项目文档澄清的问题

#### ✅ 已明确的技术决策
1. **开发框架**: Electron + Vue 3 + TypeScript (已确定)
2. **UI组件库**: Element Plus + 自定义组件 (已确定)
3. **构建工具**: Vite + Electron Builder (已确定)
4. **目标平台**: Windows 7/10/11 (已确定)
5. **部署方式**: 绿色便携版 (已确定)

#### ✅ 已明确的设计规范
1. **适老化标准**: 字体≥16px，按钮≥44px×44px (已确定)
2. **色彩方案**: 医学蓝主色调 #2E5BBA (已确定)
3. **布局规范**: 8px网格系统，充足间距 (已确定)
4. **交互规范**: 简化操作，清晰反馈 (已确定)

### 需要进一步确认的问题

#### 🤔 开发环境相关疑问

**优先级：高**
1. **Node.js 版本选择**
   - 问题: 是否需要指定具体的 Node.js 版本？
   - 建议: 使用 Node.js 18 LTS (18.19.0) 确保稳定性
   - 理由: LTS版本稳定，Electron 27 完全支持

2. **包管理器选择**
   - 问题: npm 还是 yarn？
   - 建议: 使用 npm (Node.js 自带)
   - 理由: 减少工具依赖，简化环境配置

3. **开发操作系统**
   - 问题: 是否必须在 Windows 环境下开发？
   - 建议: 推荐 Windows 10/11，但支持跨平台开发
   - 理由: 目标平台是 Windows，本地测试更准确

**优先级：中**
4. **代码编辑器配置**
   - 问题: 是否需要统一 VS Code 配置？
   - 建议: 提供推荐配置，但不强制
   - 理由: 保持开发体验一致性

5. **Git 配置规范**
   - 问题: 是否需要统一 Git 提交规范？
   - 建议: 使用 Conventional Commits 规范
   - 理由: 便于版本管理和自动化

**优先级：低**
6. **开发环境隔离**
   - 问题: 是否需要 Docker 容器化开发环境？
   - 建议: 暂不使用，直接本地环境开发
   - 理由: 项目规模适中，本地环境足够

#### 🤔 项目配置相关疑问

**优先级：高**
7. **TypeScript 严格程度**
   - 问题: TypeScript 严格模式的具体配置？
   - 建议: 启用 strict 模式，但允许 any 类型
   - 理由: 平衡类型安全和开发效率

8. **ESLint 规则严格程度**
   - 问题: 代码检查规则的严格程度？
   - 建议: 使用 @vue/typescript/recommended 基础上适度定制
   - 理由: 保证代码质量，避免过度约束

**优先级：中**
9. **路径别名配置**
   - 问题: 需要配置哪些路径别名？
   - 建议: @/ -> src/, @main/ -> src/main/, @renderer/ -> src/renderer/
   - 理由: 简化导入路径，提高开发效率

10. **环境变量管理**
    - 问题: 如何管理开发/生产环境变量？
    - 建议: 使用 .env 文件 + dotenv
    - 理由: 标准做法，便于配置管理

### 基于现有知识的决策建议

#### 推荐的技术决策

1. **Node.js 版本**: 18.19.0 LTS
   - 理由: 稳定性好，Electron 27 完全支持，长期维护

2. **包管理器**: npm
   - 理由: Node.js 自带，减少工具依赖，lockfile 兼容性好

3. **TypeScript 配置**: 严格模式 + 适度宽松
   ```json
   {
     "strict": true,
     "noImplicitAny": false,
     "skipLibCheck": true
   }
   ```

4. **ESLint 配置**: Vue 3 + TypeScript 推荐规则
   - 基础: @vue/eslint-config-typescript
   - 扩展: @typescript-eslint/recommended

5. **Prettier 配置**: 标准格式化规则
   ```json
   {
     "semi": true,
     "singleQuote": true,
     "tabWidth": 2,
     "trailingComma": "es5"
   }
   ```

6. **Git 提交规范**: Conventional Commits
   - 格式: type(scope): description
   - 类型: feat, fix, docs, style, refactor, test, chore

#### 推荐的项目结构

```
EncryptedVideoUDisk/
├── .vscode/                 # VS Code 配置
│   ├── settings.json
│   ├── extensions.json
│   └── launch.json
├── src/
│   ├── main/                # Electron 主进程
│   │   ├── index.ts
│   │   └── preload.ts
│   ├── renderer/            # Vue 渲染进程
│   │   ├── main.ts
│   │   ├── App.vue
│   │   ├── components/
│   │   ├── views/
│   │   ├── stores/
│   │   └── assets/
│   └── shared/              # 共享类型和常量
│       ├── types/
│       └── constants/
├── public/                  # 静态资源
├── dist/                    # 构建输出
├── scripts/                 # 构建脚本
├── docs/                    # 项目文档
├── .env.development         # 开发环境变量
├── .env.production          # 生产环境变量
├── .gitignore
├── .eslintrc.js
├── .prettierrc
├── tsconfig.json
├── vite.config.ts
├── electron-builder.json
└── package.json
```

## 总结

### 开发环境初始化的核心目标
1. **快速启动**: 新开发者能在 30 分钟内完成环境搭建
2. **标准化**: 统一的开发工具和配置规范
3. **可扩展**: 为后续功能开发提供良好的基础架构
4. **质量保证**: 通过工具链确保代码质量和一致性

### 关键成功因素
1. **详细的环境搭建文档**: 包含每个步骤的具体操作
2. **自动化配置脚本**: 减少手动配置的错误
3. **完整的项目模板**: 提供标准的目录结构和基础代码
4. **开发规范文档**: 明确的编码和提交规范

### 风险控制
1. **版本兼容性**: 锁定关键依赖版本，避免版本冲突
2. **环境差异**: 提供多平台的环境配置说明
3. **工具链复杂性**: 选择成熟稳定的工具，避免过度工程化
4. **学习成本**: 提供充分的文档和示例代码