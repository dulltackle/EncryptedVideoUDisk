# ALIGNMENT\_搭建项目开发框架

## 项目和任务特性规范

### 项目特性

- **项目名称**: 加密视频U盘 (Encrypted Video U Disk)
- **项目类型**: 桌面应用程序 (Electron + Vue.js)
- **目标平台**: Windows 7/10/11
- **用户群体**: 医疗技术培训领域的老年用户
- **核心价值**: 安全的视频内容分发，防止拷贝和传播

### 任务特性

- **任务名称**: 搭建项目开发框架
- **任务类型**: 项目初始化和架构搭建
- **优先级**: 高 (项目基础设施)
- **复杂度**: 中等 (涉及多技术栈集成)

## 原始需求

根据现有项目文档分析，需要搭建一个完整的项目开发框架，包括：

1. **技术栈集成**: Electron + Vue.js 3 + TypeScript + Vite
2. **UI组件库**: Element Plus (医疗风格定制)
3. **视频处理**: FFmpeg.js + Video.js
4. **加密安全**: AES-256-GCM + RSA-2048 + Web Crypto API
5. **状态管理**: Pinia
6. **构建打包**: Electron Builder

## 边界确认 (明确任务范围)

### 包含范围

- ✅ 项目目录结构设计
- ✅ 依赖管理配置 (package.json)
- ✅ 构建工具配置 (Vite, Electron Builder)
- ✅ TypeScript 配置
- ✅ 代码规范配置 (ESLint, Prettier)
- ✅ 基础组件库集成 (Element Plus)
- ✅ 路由配置 (Vue Router)
- ✅ 状态管理配置 (Pinia)
- ✅ 开发环境配置
- ✅ 基础样式系统 (医疗风格主题)
- ✅ 基础工具函数库

### 不包含范围

- ❌ 具体业务功能实现
- ❌ 视频加密解密逻辑
- ❌ 完整的UI界面开发
- ❌ 测试用例编写
- ❌ 部署配置

## 需求理解 (对现有项目的理解)

### 项目背景理解

1. **目标用户**: 医疗技术培训领域的老年用户
   - 需要大字体、大按钮的界面设计
   - 操作要简单直观，防误操作
   - 界面风格要专业医疗化

2. **核心功能**: 加密视频播放
   - U盘直接运行，无需安装
   - 视频内容加密保护
   - 防止拷贝和传播
   - 支持高清视频播放

3. **技术约束**:
   - 必须支持 Windows 7/10/11
   - 使用 Electron 实现跨平台
   - 前端使用 Vue.js 3 + TypeScript
   - UI 组件基于 Element Plus 定制

### 架构设计理解

根据 `technology_selection.md` 文档，项目采用三层架构：

1. **主进程层 (Main Process)**
   - 应用生命周期管理
   - 窗口管理
   - 文件系统操作
   - 安全策略控制

2. **渲染进程层 (Renderer Process)**
   - Vue.js 应用
   - 用户界面
   - 视频播放
   - 用户交互

3. **共享层 (Shared)**
   - 类型定义
   - 常量配置
   - 工具函数
   - IPC 通信协议

### 设计系统理解

根据设计系统文档，需要实现：

1. **色彩系统**: 医疗蓝为主色调
2. **字体系统**: 微软雅黑 + Segoe UI，老年友好字号
3. **组件系统**: 基于 Element Plus 的医疗风格定制
4. **布局系统**: 8px 基础网格，老年友好间距

## 疑问澄清 (存在歧义的地方)

### 1. 项目结构组织方式

**疑问**: 是否采用 monorepo 结构还是单一仓库结构？
**分析**: 根据项目规模和团队情况，建议采用单一仓库结构，按功能模块划分目录。
**决策**: 采用单一仓库结构，目录按 main/renderer/shared 三层划分。

### 2. 开发环境配置

**疑问**: 是否需要配置热重载和开发服务器？
**分析**: Electron 开发需要同时启动主进程和渲染进程的开发服务器。
**决策**: 配置 concurrently 同时启动多个开发服务器，支持热重载。

### 3. 代码规范和质量控制

**疑问**: 需要配置哪些代码质量工具？
**分析**: 考虑到项目的专业性和维护性需求。
**决策**: 配置 ESLint + Prettier + Husky + lint-staged 完整的代码质量控制链。

### 4. 构建和打包策略

**疑问**: 如何处理不同环境的构建配置？
**分析**: 需要区分开发、测试、生产环境的不同配置。
**决策**: 使用环境变量和配置文件分离不同环境的构建参数。

### 5. 依赖版本管理

**疑问**: 如何确保依赖版本的稳定性？
**分析**: 考虑到项目的长期维护和兼容性需求。
**决策**: 锁定主要依赖的版本号，定期更新并测试兼容性。

### 6. 安全配置

**疑问**: Electron 安全配置的最佳实践？
**分析**: 需要配置 CSP、禁用 Node.js 集成等安全措施。
**决策**: 按照 Electron 安全最佳实践配置，启用上下文隔离和沙箱模式。

## 关键决策点总结

1. **项目结构**: 单一仓库 + 三层架构 (main/renderer/shared)
2. **开发环境**: Vite + Electron + 热重载
3. **代码质量**: ESLint + Prettier + Husky 完整链条
4. **构建策略**: 环境变量 + 配置文件分离
5. **依赖管理**: 版本锁定 + 定期更新
6. **安全配置**: Electron 安全最佳实践

## 下一步行动

1. 基于以上分析创建 CONSENSUS 文档
2. 开始实际的项目框架搭建
3. 验证各个技术栈的集成效果
4. 完善开发工具链配置
